<!DOCTYPE HTML>
<html lang="en" class="latte sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Split a messy working copy - Jujutsu for everyone</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A Jujutsu tutorial that requires no previous experience with Git or other version control systems.">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/mdbook-admonish.css">
        <link rel="stylesheet" href="theme/catppuccin.css">
        <link rel="stylesheet" href="theme/catppuccin-admonish.css">
        <link rel="stylesheet" href="theme/aha_styles.css">
        <link rel="stylesheet" href="theme/mdbook-admonish-custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "latte";
            const default_dark_theme = "macchiato";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>‚Üê</kbd> or <kbd>‚Üí</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('latte')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="latte">Latte</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="frappe">Frappe</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="macchiato">Macchiato</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="mocha">Mocha</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Jujutsu for everyone</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/jj-for-everyone/jj-for-everyone.github.io" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/jj-for-everyone/jj-for-everyone.github.io/edit/main/src/commit_interactive.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="split-a-messy-working-copy"><a class="header" href="#split-a-messy-working-copy">Split a messy working copy</a></h1>
<details id="admonition-reset-your-progress" class="admonition admonish-reset" role="note" aria-labelledby="admonition-reset-your-progress-title">
<summary class="admonition-title">
<div id="admonition-reset-your-progress-title">
<p>Reset your progress</p>
</div>
<a class="admonition-anchor-link" href="#admonition-reset-your-progress"></a>
</summary>
<div>
<p>To reset your progress to the start of this chapter, run the following command:</p>
<pre><code class="language-sh">curl https://jj-for-everyone.github.io/reset.sh | bash -s commit_interactive
cd ~/jj-tutorial/repo
</code></pre>
</div>
</details>
<p>Recall the basic workflow we learned at the <a href="./commit.html">very beginning</a>:</p>
<ol>
<li>make some changes</li>
<li>create a new commit</li>
</ol>
<p>...repeat.
This is fine, but Alice is unfortunately a little forgetful.
(Aren't we all?)
Every once in a while, Alice makes a bunch of changes that are unrelated to each other, while forgetting to create a new commit in between.
Let's see how that could look like.</p>
<p>Assume Alice needs to complete three tasks.
Task 1 is implemented in its own file, while tasks 2 and 3 are implemented in the same file:</p>
<pre><code class="language-sh">echo "Implement task 1" &gt; task_1.txt
echo "Implement task 2" &gt; tasks_2_and_3.txt
echo "Implement task 3" &gt;&gt; tasks_2_and_3.txt
</code></pre>
<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">84ea100fcd1065a3edbdf1bc0dda2dc9446b147e</span>
Change ID: <span class="purple ">pnwmqvrumpqkovqowswpxpuqnuospkxo</span>
Author   : <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-11-06 15:37:35</span>)
Committer: <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-11-06 15:37:35</span>)

<span class="yellow ">    (no description set)</span>

<span class="yellow ">Added regular file task_1.txt:</span>
     <span class="green ">   1</span>: <span class="underline "></span><span class="underline green ">Implement task 1</span><span class="green "></span>
<span class="yellow ">Added regular file tasks_2_and_3.txt:</span>
     <span class="green ">   1</span>: <span class="underline "></span><span class="underline green ">Implement task 2</span><span class="green "></span>
     <span class="green ">   2</span>: <span class="underline "></span><span class="underline green ">Implement task 3</span><span class="green "></span>
</pre>
<p>Alice could make a commit with the description "Implement tasks 1, 2 and 3".
That would be fine in most situations.
But sometimes, especially if these tasks are complex and require a lot of changes, it can be a mess.
Putting them all in the same commit makes it harder to understand how the project evolved later on, both by Alice herself and other people like Bob.
Lastly, if Alice makes a mistake while implementing, say, task 2, it is more difficult to revert the mistake without also losing the improvements made by tasks 1 and 3.</p>
<p>If Alice wants to have those tasks in separate commits, how can she do that?</p>
<h2 id="committing-only-certain-files"><a class="header" href="#committing-only-certain-files">Committing only certain files</a></h2>
<p>The first option we'll look at is commit only certain files of the working copy.
This works for task 1, which is isolated to its own file.
To achieve this, you just pass the names of the files to commit as arguments to <code>jj commit</code>:</p>
<pre><code class="language-sh">jj commit --message "Implement task 1" task_1.txt
</code></pre>
<p>Let's inspect the commit produced by this command with <code>jj show @-</code>:</p>
<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">728297d2218d393b98f88638697f19c75a88a906</span>
Change ID: <span class="purple ">pnwmqvrumpqkovqowswpxpuqnuospkxo</span>
Author   : <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-11-06 15:37:35</span>)
Committer: <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-11-06 15:47:11</span>)

    Implement task 1

<span class="yellow ">Added regular file task_1.txt:</span>
     <span class="green ">   1</span>: <span class="underline "></span><span class="underline green ">Implement task 1</span><span class="green "></span>
</pre>
<p>Splendid!
And what does our current working copy commit look like?
Let's check with <code>jj show</code>:</p>
<!-- generated by aha script -->
<pre class="aha">
Commit ID: <span class="blue ">a0631dec487f5146078574ec6341ee64703839b8</span>
Change ID: <span class="purple ">nqzqoxtywllzlltmzmyvovqrmolwotzy</span>
Author   : <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-11-06 15:47:11</span>)
Committer: <span class="yellow ">Alice</span> &lt;<span class="yellow ">alice@local</span>&gt; (<span class="cyan ">2025-11-06 15:47:11</span>)

<span class="yellow ">    (no description set)</span>

<span class="yellow ">Added regular file tasks_2_and_3.txt:</span>
     <span class="green ">   1</span>: <span class="underline "></span><span class="underline green ">Implement task 2</span><span class="green "></span>
     <span class="green ">   2</span>: <span class="underline "></span><span class="underline green ">Implement task 3</span><span class="green "></span>
</pre>
<p>As expected, the file for task 1 is not changed in our working copy anymore.
The file for tasks 2 and 3 remain unchanged.
In order to split a single file over multiple commits, we need something more powerful.</p>
<h2 id="committing-only-parts-of-a-file"><a class="header" href="#committing-only-parts-of-a-file">Committing only parts of a file</a></h2>
<p>The command <code>jj commit</code> has a flag <code>--interactive</code>.
If you use it, Jujutsu will open a "terminal user interface" (TUI).
It takes over your terminal to display a simple, text-based, graphical application.
The way it works it not 100% intuitive for every user, so let's take it slow.
Run the command:</p>
<pre><code class="language-sh">jj commit --interactive
</code></pre>
<p>You should see something like this:</p>
<p><img src="./scm_record_1.png" alt="" /></p>
<p>Let check out the menu bar first.
Even though it's in the terminal, you can click on it!
If you click on <code>[File]</code>, a drop-down menu with the options <code>[Confirm]</code> and <code>[Quit]</code> will open.
It also shows the corresponding keyboard shortcuts: <kbd>c</kbd> and <kbd>q</kbd>.
You can explore the other menus yourself, if you like.</p>
<p>The changes in your working copy are below the menu bar.
For now, we can only see the name of the file we changed.
Hit the right arrow to "enter" the file, showing its content.
It should look something like this:</p>
<p><img src="./scm_record_2.png" alt="" /></p>
<p>Indentation indicates a level of hierarchy:
Files are at the top, next are "sections", i.e. consecutive changed lines, and lastly the individual lines.</p>
<p>Now we can select the lines we want to commit first.
In this case, it's the line of task 2.
Navigate to that line with the arrow keys and select it with <kbd>Space</kbd>.
It should look like this:</p>
<p><img src="./scm_record_3.png" alt="" /></p>
<p>Now that we have selected exactly the lines we want to end up in our commit, we can confirm by hitting <kbd>c</kbd> (or clicking on "File &gt; Confirm" in the menu bar).
The TUI will close, and your text editor will open for you to enter a commit message.
Enter "Implement task 2", then save &amp; quit.
You can confirm that the file was correctly split over two commits with <code>jj show @-</code> and <code>jj show</code>.</p>
<p>Let's tie up the remaining loose ends by committing task 3 and pushing the three new commits to the remote.</p>
<pre><code class="language-sh">jj commit --message "Implement task 3"
jj bookmark move main --to @-
jj git push
</code></pre>
<h2 id=""><a class="header" href="#"></a></h2>
<div id="admonition-youve-completed-level-3--" class="admonition admonish-success" role="note" aria-labelledby="admonition-youve-completed-level-3---title">
<div class="admonition-title">
<div id="admonition-youve-completed-level-3---title">
<p>You've completed Level 3 ! üéâ</p>
</div>
<a class="admonition-anchor-link" href="#admonition-youve-completed-level-3--"></a>
</div>
<div>
<p>Now you have the skills to get yourself out of most problems that can come up when working with version control.
Let's summarize what we've learned:</p>
<ul>
<li><code>jj undo</code> can restore previous states of your entire repository step-by-step.
Don't worry about making mistakes!
Experiment freely and <code>jj undo</code> if anything goes wrong.</li>
<li>If you want to work on a bookmark that only exists on the remote, for example after making a fresh clone of your repo, run <code>jj bookmark track</code>.</li>
<li>Combining two branches can lead to conflicts if they change the same part of a file.
Resolve such conflicts by carefully removing the conflict markers to produce a sensible result.</li>
<li>If you end up with commits you no longer need for whatever reason, delete them with <code>jj abandon</code>.</li>
<li>You can restore the content of a file using <code>jj restore</code>.
By default, it restores to the parent of your working copy, but you can specify any commit to restore from with the <code>--from</code> flag.</li>
<li>If you end up with unrelated changes in your working copy, you can put them in separate commits with <code>jj commit --interactive</code>.</li>
</ul>
<p>Now you know pretty much everything you need.
You should be productive and rarely get stuck.
Some readers will decide not to continue further with the tutorial, which is totally fine.</p>
<p>For those who want more, the next level will teach you how to rewrite history effortlessly.
This skill will allow you to produce a much better commit history.
Some projects like the Linux kernel or Jujutsu itself require their contributors to master these skills.
Without them, contributors cannot meet the project's quality standards.</p>
<p>Aside from that, being able to rewrite history is simply freeing.
You'll worry less about how to separate your changes into neat commits and what description to give them, because you can easily change these things later.</p>
<p>Nevertheless, feel free to take a long break before coming back here.
You have learned a lot already, and it will be beneficial to have mastered that with practice before continuing.</p>
<p>At this point, you should also start exploring the Jujutsu CLI a little bit on your own.
This tutorial is not a comprehensive reference of everything Jujutsu has to offer.
Would you like to display all commits made by a specific author?
Run <code>jj log --help</code> to find out how.
Would you like to tweak the behavior of Jujutsu in some way?
Maybe the <a href="https://docs.jj-vcs.dev/latest/config/">configuration guide</a> can help you out.</p>
</div>
</div>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="restore.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="to_be_continued.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="restore.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="to_be_continued.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
