# Rebasing

````admonish reset title="Reset your progress" collapsible=true
To reset your progress, run:

```sh
curl https://jj-for-everyone.github.io/reset.sh | bash -s rebase
cd ~/jj-tutorial/repo-bob
```
````

We are in Bob's repo.

```sh
cd ~/jj-tutorial/repo-bob
```

When Bob tries to push his new commit, it fails, just like it did for Alice.

```sh
jj bookmark move main --to @-
jj git push
```

The solution is to fetch the remote changes first.

```sh
jj git fetch
```

Bob's log now shows that his changes and Alice's have diverged:

<!-- generated by aha script -->
<pre class="aha">
<span class="bold "></span><span class="bold green ">@</span>  <span class="bold "></span><span class="bold highlighted purple ">z</span><span class="bold highlighted dimgray ">tyvwqll</span><span class="bold "> </span><span class="bold yellow ">bob@local</span><span class="bold "> </span><span class="bold highlighted cyan ">2025-07-22 21:29:52</span><span class="bold "> </span><span class="bold highlighted blue ">9</span><span class="bold highlighted dimgray ">3f27644</span><span class="bold "></span>
│  <span class="bold "></span><span class="bold highlighted green ">(empty)</span><span class="bold "> </span><span class="bold highlighted green ">(no description set)</span><span class="bold "></span>
○  <span class="bold "></span><span class="bold purple ">s</span><span class="highlighted dimgray ">mswwyok</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-22 21:29:27</span> <span class="purple ">main?? main@git</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">e</span><span class="highlighted dimgray ">583fa6e</span>
│  Add submission instructions
│ <span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">t</span><span class="highlighted dimgray ">wywpklt</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-22 21:27:24</span> <span class="purple ">main?? main@origin</span> <span class="bold "></span><span class="bold blue ">6</span><span class="highlighted dimgray ">06959ce</span>
╭─┤  <span class="green ">(empty)</span> Merge code and documentation for hello-world
│ │
│ ~
│
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">q</span><span class="highlighted dimgray ">uolxwkk</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-22 21:22:22</span> <span class="bold "></span><span class="bold blue ">8</span><span class="highlighted dimgray ">d538390</span>
│  Document hello.py in README.md
~
</pre>

Unlike Alice, who created a merge commit, Bob prefers a linear history. He will rebase his changes on top of Alice's. The `jj rebase` command moves commits from one "base" to another.

Bob specifies the destination (`-d` or `--destination`) for his commit: the remote `main` bookmark.

```sh
jj rebase -d main@origin
```

The log now shows a straight line, with Bob's commit directly following Alice's:

<!-- generated by aha script -->
<pre class="aha">
<span class="bold "></span><span class="bold green ">@</span>  <span class="bold "></span><span class="bold highlighted purple ">z</span><span class="bold highlighted dimgray ">tyvwqll</span><span class="bold "> </span><span class="bold yellow ">bob@local</span><span class="bold "> </span><span class="bold highlighted cyan ">2025-07-22 21:30:38</span><span class="bold "> </span><span class="bold highlighted blue ">e</span><span class="bold highlighted dimgray ">911e4c7</span><span class="bold "></span>
│  <span class="bold "></span><span class="bold highlighted green ">(empty)</span><span class="bold "> </span><span class="bold highlighted green ">(no description set)</span><span class="bold "></span>
○  <span class="bold "></span><span class="bold purple ">s</span><span class="highlighted dimgray ">mswwyok</span> <span class="yellow ">bob@local</span> <span class="cyan ">2025-07-22 21:30:38</span> <span class="purple ">main*</span> <span class="green ">git_head()</span> <span class="bold "></span><span class="bold blue ">0</span><span class="highlighted dimgray ">02bd1179</span>
│  Add submission instructions
<span class="bold "></span><span class="bold highlighted cyan ">◆</span>  <span class="bold "></span><span class="bold purple ">t</span><span class="highlighted dimgray ">wywpklt</span> <span class="yellow ">alice@local</span> <span class="cyan ">2025-07-22 21:27:24</span> <span class="purple ">main@origin</span> <span class="bold "></span><span class="bold blue ">6</span><span class="highlighted dimgray ">06959ce</span>
│  <span class="green ">(empty)</span> Merge code and documentation for hello-world
~
</pre>

By rebasing, Bob has **rewritten history**. His commit now descends from Alice's. Now he can push:

```sh
jj git push
```

### Merge vs. Rebase

Both are valid ways to integrate divergent changes.
Here's a hopefully balanced overview of the main trade-off:

|            | Advantage                                    | Disadvantage                                   |
| ---------- | -------------------------------------------- | ---------------------------------------------- |
| **Merge**  | Preserves history exactly as it happened.    | Can result in a tangled, hard-to-read history. |
| **Rebase** | Results in an easy-to-read, linear history.  | Rewrites history, obscuring the original order.|
